{% extends "forum_base.html" %}

{% set title = 'Forum - ' + board.name %}

{% set breadcrumb_items = [
    {'title': 'Forums'},
    {'title': forum.name, 'url': forum.get_url()},
    {'title': board.name, 'url': board.get_url()}]
%}

{% block content %}
<div class="container">
    <div class="row">
        <div class="span12">
            {% if current_user.is_authenticated() %}
            <a class="btn btn-theme" type="submit" href="{{ board.get_post_url() }}">Post New Topic</a>
            {% endif %}
        </div>
    </div>
    <div class="row">
        <aside class="span12 widget">
            <table class="table table-condensed table-striped table-hover">
                <thead>
                    <tr>
                        <th></th>
                        <th>Topic</th>
                        <th>Posted</th>
                        <th>Most Recent</th>
                    </tr>
                </thead>
                <tbody>
                    {% for topic in topics %}
                    {% set last_post = topic.get_last_post() %}
                    <tr>
                        <th>
                            {% if read_topics != None %}
                                {% if topic.id in read_topics %}
                                    <small style="color: #cccccc">!</small>
                                {% else %}
                                    <small>!</small>
                                {% endif %}
                            {% endif %}
                        </th>
                        <th>
                            <a href="{{ topic.get_url() }}">{{ topic.title }}</a>
                        </th>
                        <th>
                            <a href="{{ topic.author.get_profile_url() }}">{{ topic.author.name }}</a>
                        </th>
                        <th>
                            {{ last_post.get_pretty_date() }}
                            by
                            <a href="{{ last_post.author.get_profile_url() }}">{{ last_post.author.name }}</a>
                        </th>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </aside>
    </div>
    <div class="row">
        <div class="span12">
            <div class="pagination">
                <ul>
                    <li class="{% if not prev %}disabled{% endif %}">
                        <a href="{{ prev or '#' }}">Prev</a>
                    </li>
                    {% for link in links %}
                    <li class="{% if link['active'] %}active{% endif %}">
                        <a href="{{ link['url'] }}">{{ link['num'] }}</a>
                    </li>
                    {% endfor %}
                    <li class="{% if not next %}disabled{% endif %}">
                        <a href="{{ next or '#' }}">Next</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
